<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>è³¼ç‰©è»Š</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>ğŸ›’ æˆ‘çš„è³¼ç‰©è»Š</h1>
    <div>
      <a href="index.html">å›å•†åŸ</a>
      <span id="memberArea"></span>
      <span class="cart-icon" onclick="window.location.href='cart.html'">
        ğŸ›’
        <span id="cart-count" class="cart-badge"></span>
      </span>
    </div>
  </header>

  <main>
    <div id="cart-list"></div>
    <p id="cart-total"></p>
    <a href="checkout.html" id="checkout-btn" class="cart-btn">å‰å¾€çµå¸³</a>
  </main>

  <footer>
    <p>Â© 2025 è¾²æ¥­åˆä½œç¤¾å•†åŸ</p>
  </footer>

  <script src="config.js"></script>
  <script src="member.js"></script>
  <script src="cart-utils.js"></script>
  <script>
    function renderCart() {
      const container = document.getElementById("cart-list");
      const cart = getCart() || [];
      container.innerHTML = "";

      if (!cart.length) {
        container.innerHTML = "<p>è³¼ç‰©è»Šæ˜¯ç©ºçš„</p>";
        document.getElementById("cart-total").textContent = "";
        document.getElementById("checkout-btn").style.display = "none";
        return;
      }

      cart.forEach(item => {
        const div = document.createElement("div");
        div.className = "cart-item";
        div.innerHTML = `<span>${item.name}</span><span>æ•¸é‡: ${item.qty}</span><span>å°è¨ˆ: $${item.price * item.qty}</span>`;
        
        const btn = document.createElement("button");
        btn.textContent = "åˆªé™¤";
        btn.addEventListener("click", () => removeCartItem(item.id));
        div.appendChild(btn);

        container.appendChild(div);
      });

      const total = cart.reduce((sum,i)=>sum+i.price*i.qty,0);
      document.getElementById("cart-total").textContent = `ç¸½è¨ˆ: $${total}`;
      document.getElementById("checkout-btn").style.display = "inline-block";
    }

    function removeCartItem(id) {
      let cart = getCart() || [];
      cart = cart.filter(i => i.id !== id);
      setCart(cart);
      updateCartCount();
      renderCart();
    }

    document.addEventListener("DOMContentLoaded", () => {
      updateMemberArea();
      updateCartCount();
      renderCart();
    });
  </script>
</body>
</html>
